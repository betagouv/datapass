/*! DSFR v1.2.1 | SPDX-License-Identifier: MIT | License-Filename: LICENSE.md | restricted use (see terms and conditions) */
const e=window.dsfr,t={SYSTEM:"system",LIGHT:"light",DARK:"dark"},s={THEME:e.ns.attr("theme"),SCHEME:e.ns.attr("scheme"),TRANSITION:e.ns.attr("transition")},i={LIGHT:"light",DARK:"dark"},h={SCHEME:e.ns.emission("scheme","scheme"),THEME:e.ns.emission("scheme","theme"),ASK:e.ns.emission("scheme","ask")};class c extends e.core.Instance{constructor(){super(!1)}static get instanceClassName(){return"Scheme"}init(){this.changing=this.change.bind(this),this.hasAttribute(s.TRANSITION)&&(this.removeAttribute(s.TRANSITION),this.request(this.restoreTransition.bind(this)));const e=localStorage.getItem("scheme"),i=this.getAttribute(s.SCHEME);switch(e){case t.DARK:case t.LIGHT:case t.SYSTEM:this.scheme=e;break;default:switch(i){case t.DARK:this.scheme=t.DARK;break;case t.LIGHT:this.scheme=t.LIGHT;break;default:this.scheme=t.SYSTEM}}this.addAscent(h.ASK,this.ask.bind(this)),this.addAscent(h.SCHEME,this.apply.bind(this))}get proxy(){const e=this,t={get scheme(){return e.scheme},set scheme(t){e.scheme=t}};return((e,...t)=>(t.forEach((t=>{const s=Object.keys(t).reduce(((e,s)=>(e[s]=Object.getOwnPropertyDescriptor(t,s),e)),{});Object.getOwnPropertySymbols(t).forEach((e=>{const i=Object.getOwnPropertyDescriptor(t,e);i.enumerable&&(s[e]=i)})),Object.defineProperties(e,s)})),e))(super.proxy,t)}restoreTransition(){this.setAttribute(s.TRANSITION,"")}ask(){this.descend(h.SCHEME,this.scheme)}apply(e){this.scheme=e}get scheme(){return this._scheme}set scheme(e){if(this._scheme!==e){switch(this._scheme=e,e){case t.SYSTEM:this.listenPreferences();break;case t.DARK:this.unlistenPreferences(),this.theme=i.DARK;break;case t.LIGHT:this.unlistenPreferences(),this.theme=i.LIGHT;break;default:return void(this.scheme=t.SYSTEM)}this.descend(h.SCHEME,e),localStorage.setItem("scheme",e),this.setAttribute(s.SCHEME,e)}}get theme(){return this._theme}set theme(e){if(this._theme!==e)switch(e){case i.LIGHT:case i.DARK:this._theme=e,this.setAttribute(s.THEME,e),this.descend(h.THEME,e)}}listenPreferences(){this.isListening||(this.isListening=!0,this.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.mediaQuery.addEventListener("change",this.changing),this.change())}unlistenPreferences(){this.isListening&&(this.isListening=!1,this.mediaQuery.removeEventListener("change",this.changing),this.mediaQuery=null)}change(){this.isListening&&(this.theme=this.mediaQuery.matches?i.DARK:i.LIGHT)}mutate(e){e.indexOf(s.SCHEME)>-1&&(this.scheme=this.getAttribute(s.SCHEME)),e.indexOf(s.THEME)>-1&&(this.theme=this.getAttribute(s.THEME))}dispose(){this.unlistenPreferences()}}const r={SCHEME:`:root${e.ns.attr.selector("theme")}, :root${e.ns.attr.selector("scheme")}`,SWITCH_THEME:e.ns.selector("switch-theme"),RADIO_BUTTONS:`input[name="${e.ns("radios-theme")}"]`};e.scheme={Scheme:c,SchemeValue:t,SchemeSelector:r,SchemeEmission:h,SchemeTheme:i},e.register(e.scheme.SchemeSelector.SCHEME,e.scheme.Scheme);
//# sourceMappingURL=scheme.module.min.js.map
